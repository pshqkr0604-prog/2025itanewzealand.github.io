<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>2025 ITA ë‰´ì§ˆëœë“œ ì—¬í–‰</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 50px; }
    input, textarea, button { padding: 10px; margin: 10px; width: 300px; }
    ul { list-style: none; padding: 0; }
    li { margin: 5px 0; }
    .section { display: none; margin-top: 30px; }
  </style>
</head>
<body>
  <h1>2025 ITA ë‰´ì§ˆëœë“œ ì—¬í–‰ í¬í„¸</h1>

  <!-- ë¡œê·¸ì¸ -->
  <div id="loginSection">
    <p>ì‚¬ë²ˆì„ ì…ë ¥í•˜ì„¸ìš”:</p>
    <input type="text" id="employeeId" placeholder="ì˜ˆ: 1612156">
    <button onclick="login()">ë¡œê·¸ì¸</button>
    <p id="loginError" style="color:red;"></p>
  </div>

  <!-- ë©”ì¸ ë©”ë‰´ -->
  <div id="mainMenu" style="display:none;">
    <p><strong id="employeeName"></strong> ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤!</p>
    <h3>ğŸ“‚ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”:</h3>
    <ul>
      <li><button onclick="showSection('travelSchedule')">ğŸ—“ ì—¬í–‰ ì¼ì • ì•ˆë‚´</button></li>
      <li><button onclick="showSection('flightInfo')">âœˆï¸ ê°œì¸ í•­ê³µí¸ ì •ë³´</button></li>
      <li><button onclick="showSection('eventSchedule')">ğŸ‰ í–‰ì‚¬ ì¼ì •</button></li>
      <li><button onclick="showSection('nzInfo')">ğŸ‡³ğŸ‡¿ ë‰´ì§ˆëœë“œ ì†Œê°œ</button></li>
      <li><button onclick="showSection('roomDrop')">ğŸ ë£¸ë“œë ë¬¼í’ˆ ì„¤ëª…</button></li>
      <li><button onclick="showSection('request')">âœï¸ ìš”ì²­ ì‚¬í•­</button></li>
      <li><button onclick="showSection('emergency')">ğŸ“ ê¸´ê¸‰ ì—°ë½ë§</button></li>
    </ul>

    <div id="travelSchedule" class="section">
      <h4>ğŸ—“ ì—¬í–‰ ì¼ì • ì•ˆë‚´</h4>
      <p>1ì¼ì°¨: ì˜¤í´ëœë“œ ë„ì°© / í™˜ì˜ì‹<br>2ì¼ì°¨: ë°€í¬ë“œ ì‚¬ìš´ë“œ íˆ¬ì–´<br>3ì¼ì°¨: ììœ  ì‹œê°„ / ì„ íƒ ê´€ê´‘</p>
    </div>

    <div id="flightInfo" class="section">
      <h4>âœˆï¸ ê°œì¸ í•­ê³µí¸ ì •ë³´</h4>
      <p id="flightData">í•­ê³µí¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
    </div>

    <div id="eventSchedule" class="section">
      <h4>ğŸ‰ í–‰ì‚¬ ì¼ì •</h4>
      <p>2ì¼ì°¨ ì €ë…: í™˜ì˜ ë§Œì°¬<br>3ì¼ì°¨ ë°¤: ê°ˆë¼ ë””ë„ˆ</p>
    </div>

    <div id="nzInfo" class="section">
      <h4>ğŸ‡³ğŸ‡¿ ë‰´ì§ˆëœë“œ ì†Œê°œ</h4>
      <p>êµ­ê°€ëª…: ë‰´ì§ˆëœë“œ<br>í™˜ìœ¨: 1 NZD â‰ˆ 800 KRW<br>GDP: ì•½ 2,100ì–µ USD</p>
    </div>

    <div id="roomDrop" class="section">
      <h4>ğŸ ë£¸ë“œë ë¬¼í’ˆ ì„¤ëª…</h4>
      <p>ë£¸ë“œë ì˜¤í”ˆ í›„ ì´ ì˜ì—­ì´ í™œì„±í™”ë©ë‹ˆë‹¤.</p>
    </div>

    <div id="request" class="section">
      <h4>âœï¸ ìš”ì²­ ì‚¬í•­</h4>
      <textarea id="requestText" rows="4" placeholder="ì˜ˆ: ê¸°ë‚´ì‹, ë£¸ì‰ì–´ ìš”ì²­ ë“±"></textarea><br>
      <button onclick="submitRequest()">ì œì¶œ</button>
      <p id="submitMessage" style="color: green;"></p>
    </div>

    <div id="emergency" class="section">
      <h4>ğŸ“ ê¸´ê¸‰ ì—°ë½ë§</h4>
      <p>í˜„ì§€ ë‹´ë‹¹ì: ê¹€ì§€í˜„ / +64 21 123 4567<br>í•œêµ­ ë‹´ë‹¹ì: ì´ì„±ë¯¼ / 010-1234-5678</p>
    </div>
  </div>

  <script>
    let employeeData = [];
    let currentUser = null;

    // âœ… í•­ìƒ ìµœì‹  employees.jsonì„ ë¶ˆëŸ¬ì˜¤ê²Œ í•˜ê¸° ìœ„í•œ ìºì‹œ ìš°íšŒ
    fetch(`people/employees.json?ts=${Date.now()}`)
      .then(res => res.json())
      .then(data => { employeeData = data; });

    function login() {
      const id = document.getElementById("employeeId").value.trim();
      const matched = employeeData.find(emp => emp.id === id);

      if (matched) {
        currentUser = matched;
        document.getElementById("employeeName").textContent = matched.name;
        document.getElementById("loginSection").style.display = "none";
        document.getElementById("mainMenu").style.display = "block";
        document.getElementById("loginError").textContent = "";
      } else {
        document.getElementById("loginError").textContent = "ë“±ë¡ë˜ì§€ ì•Šì€ ì‚¬ë²ˆì…ë‹ˆë‹¤.";
        document.getElementById("mainMenu").style.display = "none";
      }
    }

    function showSection(id) {
      const sections = document.querySelectorAll('.section');
      sections.forEach(sec => sec.style.display = 'none');
      const selected = document.getElementById(id);
      selected.style.display = 'block';

      if (id === "flightInfo" && currentUser) {
        document.getElementById("flightData").textContent = currentUser.flight || "í•­ê³µí¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.";
      }
    }

    function submitRequest() {
      if (!currentUser) return;

      const request = document.getElementById("requestText").value.trim();
      if (!request) {
        alert("ìš”ì²­ì‚¬í•­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }

      const endpoint = "https://script.google.com/macros/s/AKfycbzyu7FDCPWeEsb4dOa3MhJx8hFMONXfjl-CfUpOOIPWTXXdzHZK1eAAUxS7vz0Khq2G0A/exec";

      fetch(endpoint, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ id: currentUser.id, name: currentUser.name, request })
      });

      document.getElementById("submitMessage").textContent = "ìš”ì²­ì‚¬í•­ì´ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!";
      document.getElementById("requestText").value = "";
    }
  </script>
</body>
</html>
