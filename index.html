<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2025 ITA ë‰´ì§ˆëœë“œ ì—¬í–‰</title>
  <script>
    const isMobile = /Mobi|Android/i.test(navigator.userAgent);
    const cssFile = isMobile ? 'css/mobile.css' : 'css/desktop.css';
    document.write(`<link rel="stylesheet" href="${cssFile}">`);
  </script>
</head>
<body>
  <div class="container">
    <header>
      <img src="assets/images/logo.png" alt="íšŒì‚¬ ë¡œê³ " class="logo">
      <h1>2025 ITA ë‰´ì§ˆëœë“œ ì—¬í–‰</h1>
      <p class="subtitle">ì°¸ê°€ì ì „ìš© í¬í„¸</p>
    </header>

    <section id="loginSection">
      <p>ì‚¬ë²ˆì„ ì…ë ¥í•˜ì„¸ìš”:</p>
      <input type="text" id="employeeId" placeholder="ì˜ˆ: 1612156">
      <button onclick="login()">ë¡œê·¸ì¸</button>
      <p id="loginError" class="error"></p>
    </section>

    <section id="mainMenu" style="display:none;">
      <p><strong id="employeeName"></strong> ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤!</p>
      <div class="menu">
        <button onclick="showSection('travelSchedule')">ğŸ—“ ì—¬í–‰ ì¼ì • ì•ˆë‚´</button>
        <button onclick="showSection('flightInfo')">âœˆï¸ í•­ê³µí¸ ì •ë³´</button>
        <button onclick="showSection('eventSchedule')">ğŸ‰ í–‰ì‚¬ ì¼ì •</button>
        <button onclick="showSection('nzInfo')">ğŸ‡³ğŸ‡¿ ë‰´ì§ˆëœë“œ ì†Œê°œ</button>
        <button onclick="showSection('roomDrop')">ğŸ ë£¸ë“œë ë¬¼í’ˆ</button>
        <button onclick="showSection('request')">âœï¸ ìš”ì²­ ì‚¬í•­</button>
        <button onclick="showSection('emergency')">ğŸ“ ê¸´ê¸‰ ì—°ë½ë§</button>
      </div>

      <div id="travelSchedule" class="section">
        <h2>ğŸ—“ ì—¬í–‰ ì¼ì • ì•ˆë‚´</h2>
        <p>1ì¼ì°¨: ì˜¤í´ëœë“œ ë„ì°© / í™˜ì˜ì‹<br>2ì¼ì°¨: ë°€í¬ë“œ ì‚¬ìš´ë“œ íˆ¬ì–´<br>3ì¼ì°¨: ììœ  ì‹œê°„ / ì„ íƒ ê´€ê´‘</p>
      </div>

      <div id="flightInfo" class="section">
        <h2>âœˆï¸ ê°œì¸ í•­ê³µí¸ ì •ë³´</h2>
        <p id="flightData">í•­ê³µí¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
      </div>

      <div id="eventSchedule" class="section">
        <h2>ğŸ‰ í–‰ì‚¬ ì¼ì •</h2>
        <p>2ì¼ì°¨ ì €ë…: í™˜ì˜ ë§Œì°¬<br>3ì¼ì°¨ ë°¤: ê°ˆë¼ ë””ë„ˆ</p>
      </div>

      <div id="nzInfo" class="section">
        <h2>ğŸ‡³ğŸ‡¿ ë‰´ì§ˆëœë“œ ì†Œê°œ</h2>
        <p>êµ­ê°€ëª…: ë‰´ì§ˆëœë“œ<br>í™˜ìœ¨: 1 NZD â‰ˆ 800 KRW<br>GDP: ì•½ 2,100ì–µ USD</p>
      </div>

      <div id="roomDrop" class="section">
        <h2>ğŸ ë£¸ë“œë ë¬¼í’ˆ ì„¤ëª…</h2>
        <p>ë£¸ë“œë ê³µê°œ ì‹œ í™œì„±í™”ë©ë‹ˆë‹¤.</p>
      </div>

      <div id="request" class="section">
        <h2>âœï¸ ìš”ì²­ ì‚¬í•­</h2>
        <textarea id="requestText" placeholder="ì˜ˆ: ê¸°ë‚´ì‹, ë£¸ì‰ì–´ ìš”ì²­ ë“±"></textarea><br>
        <button onclick="submitRequest()">ì œì¶œ</button>
        <p id="submitMessage" class="success"></p>
      </div>

      <div id="emergency" class="section">
        <h2>ğŸ“ ê¸´ê¸‰ ì—°ë½ë§</h2>
        <p>í˜„ì§€ ë‹´ë‹¹ì: ê¹€ì§€í˜„ / +64 21 123 4567<br>í•œêµ­ ë‹´ë‹¹ì: ì´ì„±ë¯¼ / 010-1234-5678</p>
      </div>
    </section>
  </div>

  <script>
    let employeeData = [];
    let currentUser = null;

    fetch(`people/employees.json?ts=${Date.now()}`)
      .then(res => res.json())
      .then(data => { employeeData = data; });

    function login() {
      const id = document.getElementById("employeeId").value.trim();
      const matched = employeeData.find(emp => emp.id === id);
      if (matched) {
        currentUser = matched;
        document.getElementById("employeeName").textContent = matched.name;
        document.getElementById("loginSection").style.display = "none";
        document.getElementById("mainMenu").style.display = "block";
      } else {
        document.getElementById("loginError").textContent = "ë“±ë¡ë˜ì§€ ì•Šì€ ì‚¬ë²ˆì…ë‹ˆë‹¤.";
      }
    }

    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
      document.getElementById(id).style.display = 'block';
      if (id === "flightInfo" && currentUser) {
        document.getElementById("flightData").textContent = currentUser.flight || "ë“±ë¡ëœ í•­ê³µí¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.";
      }
    }

    function submitRequest() {
      if (!currentUser) return;
      const request = document.getElementById("requestText").value.trim();
      if (!request) return alert("ìš”ì²­ì‚¬í•­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");

      const endpoint = "https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec";
      fetch(endpoint, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ id: currentUser.id, name: currentUser.name, request })
      });

      document.getElementById("submitMessage").textContent = "ìš”ì²­ì‚¬í•­ì´ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!";
      document.getElementById("requestText").value = "";
    }
  </script>
</body>
</html>
